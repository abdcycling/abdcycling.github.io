jQuery.ajaxSetup({cache:!1}),jQuery.fn.slideFade=function(e,a){for(var t,o,l=0;l<arguments.length;l++)"number"==typeof arguments[l]?t=arguments[l]:o=arguments[l];this.animate({opacity:"toggle",height:"toggle"},t=t||500,function(){(o="function"!=typeof o?function(){}:o).call(this)})},function(u){u.fn.plusGallery=function(e){var r=this;if(0===r.length)return!1;var n={imagePath:"images/plusgallery",type:"google",albumTitle:!1,albumLimit:16,limit:30,apiKey:"",exclude:null,include:null,imageData:null,imgArray:[],titleArray:[],t:"",idx:0,imgCount:0,imgTotal:0,winWidth:1024,touch:!1,titleText:"",init:function(){var e=u(document);"ontouchstart"in document.documentElement&&(window.scrollTo(0,1),n.touch=!0),n.winWidth=u(window).width(),u("#pgzoomview").remove(),e.off("click",".pgalbumlink, #pgthumbhome, .pgthumb, .pgzoomarrow, .pgzoomclose, #pgzoomview, #pgzoomslide, .pgzoomimg"),n.getDataAttr(),n.writeHTML(),null!==n.albumId||"instagram"==n.type||"local"==n.type&&!n.imageData.hasOwnProperty("albums")?n.loadSingleAlbum():"local"==n.type?n.parseAlbumData(n.imageData):n.loadAlbumData(),e.on("click",".pgalbumlink",function(e){e.preventDefault(),u(this).append('<span class="pgloading"></span>');var a,e=u(this).children("span").html();"local"==n.type?(a=u(this).attr("data-album-index").replace("http://","").replace("//","").replace("https://",""),n.parseData(n.imageData.albums[a],e)):(a=this.href,n.loadGallery(a,e))}),e.on("click","#pgthumbhome",function(e){e.preventDefault(),u("#pgthumbview").slideFade(700),u("#pgalbums").slideFade(700)}),e.on("click",".pgthumb",function(e){e.preventDefault();e=u(".pgthumb").index(this);n.loadZoom(e)}),e.on("click",".pgzoomarrow",function(e){e.preventDefault();e=this.rel;return n.prevNext(e),!1}),e.on("click",".pgzoomclose",function(e){e.preventDefault(),n.unloadZoom()}),e.on("click","#pgzoomview",function(e){e.preventDefault(),n.unloadZoom()}),e.on("click","#pgzoomslide",function(){n.unloadZoom()}),e.on("click",".pgzoomimg",function(){return u(this).attr("id").replace("pgzoomimg","")<n.imgTotal-1&&n.prevNext("next"),!1}),clearTimeout(n.t)},getDataAttr:function(){var e=r.attr("data-type");if(!e)return alert("You must enter a data type."),!1;if(n.type=e,e=r.attr("data-userid"))n.userId=e;else if("local"!=n.type)return alert("You must enter a valid User ID"),!1;(e=r.attr("data-limit"))&&(n.limit=e),(e=r.attr("data-album-limit"))&&(n.albumLimit=e),(e=r.attr("data-exclude"))&&(n.exclude=e.split(",")),(e=r.attr("data-include"))&&(n.include=e.split(",")),(e=r.attr("data-api-key"))&&(n.apiKey=e),(e=r.attr("data-access-token"))&&(n.accessToken=e),(e=r.attr("data-album-id"))?(n.albumId=e,"true"==(titleAttr=r.attr("data-album-title"))?n.albumTitle=!0:n.albumTitle=!1):(n.albumTitle=!0,n.albumId=null),e=r.attr("data-credit"),n.credit="false"!=e,(e=r.attr("data-image-path"))&&(n.imagePath=e),(e=r.attr("data-image-data"))&&(n.imageData=JSON.parse(e))},writeHTML:function(){var e;n.touch?r.addClass(e="touch"):r.addClass(e="no-touch"),r.append('<ul id="pgalbums" class="clearfix"></ul><div id="pgthumbview"><ul id="pgthumbs" class="clearfix"></ul></div>'),u("body").prepend('<div id="pgzoomview" class="pg '+e+'"><a href="#" rel="previous" id="pgzoomclose" title="Close">Close</a><a href="#" rel="previous" id="pgprevious" class="pgzoomarrow" title="previous">Previous</a><a href="#" rel="next" id="pgnext" class="pgzoomarrow" title="Next">Next</a><div id="pgzoomscroll"><ul id="pgzoom"></ul></div></div>'),r.addClass("pg"),!0===n.credit&&r.append('<div id="pgcredit"><a href="http://www.plusgallery.net" target="_blank" title="Powered by +GALLERY"><span>+</span>Gallery</a></div>'),!0===n.albumTitle&&u("#pgthumbview").prepend('<ul id="pgthumbcrumbs" class="clearfix"><li id="pgthumbhome">&laquo;</li></ul>')},parseAlbumData:function(e){var a,t,o,l,i;switch(r.addClass("loaded"),n.type){case"google":a=e.feed.entry,0<(t=(t=a.length)>n.albumLimit?n.albumLimit:t)?u.each(a,function(e,a){e<t&&(l=a.title.$t,i=a.link[0].href,o=(o=a.media$group.media$thumbnail[0].url).replace("s160","s210"),n.loadAlbums(l,o,i,e))}):alert("There are either no results for albums with this user ID or there was an error loading the data. \n"+i);break;case"flickr":a=e.photosets.photoset,0<(t=(t=a.length)>n.albumLimit?n.albumLimit:t)?u.each(a,function(e,a){e<t&&(l=a.title._content,o="http://farm"+a.farm+".staticflickr.com/"+a.server+"/"+a.primary+"_"+a.secret+"_n.jpg",i="http://api.flickr.com/services/rest/?&method=flickr.photosets.getPhotos&api_key="+n.apiKey+"&photoset_id="+a.id+"=&format=json&jsoncallback=?",n.loadAlbums(l,o,i))}):alert("There are either no results for albums with this user ID or there was an error loading the data. \n"+i);break;case"facebook":a=e.data,0<(t=(t=a.length)>n.albumLimit?n.albumLimit:t)?u.each(a,function(e,a){e<t&&(l=a.name,i="https://graph.facebook.com/"+a.id+"/photos?limit="+n.limit+"&access_token="+n.accessToken,o="http://graph.facebook.com/"+a.id+"/picture?type=album",n.loadAlbums(l,o,i))}):alert("There are either no results for albums with this user ID or there was an error loading the data. \n"+albumURL);break;case"local":a=e.albums,0<(t=(t=a.length)>n.albumLimit?n.albumLimit:t)?u.each(a,function(e,a){e<t&&(l=a.title,o=a.images[0].th,i="http://"+e,n.loadAlbums(l,o,i))}):alert("There are no albums available in the specified JSON.")}},loadAlbumData:function(){var e;switch(n.type){case"google":e="https://picasaweb.google.com/data/feed/base/user/"+n.userId+"?alt=json&kind=album&hl=en_US&max-results="+n.albumLimit+"&callback=?";break;case"flickr":e="http://api.flickr.com/services/rest/?&method=flickr.photosets.getList&api_key="+n.apiKey+"&user_id="+n.userId+"&format=json&jsoncallback=?";break;case"facebook":e="https://graph.facebook.com/"+n.userId+"/albums?limit="+n.albumLimit+"&access_token="+n.accessToken+"&callback=?";break;case"instagram":case"local":e=null;break;default:alert("Please define a gallery type.")}u.getJSON(e,function(e){n.parseAlbumData(e)})},loadAlbums:function(e,a,t){var o=!0;null!==n.exclude&&u.each(n.exclude,function(e,a){0<t.indexOf(a)&&(o=!1)}),null!==n.include&&(o=!1,u.each(n.include,function(e,a){0<t.indexOf(a)&&(o=!0)})),o&&(a="facebook"==n.type||"flickr"==n.type?'<img src="'+n.imagePath+'/square.png" style="background-image: url('+a+');" title="'+e+'" title="'+e+'" class="pgalbumimg">':'<img src="'+a+'" title="'+e+'" title="'+e+'" class="pgalbumimg">',"local"==n.type?u("#pgalbums").append('<li class="pgalbumthumb"><a href="#" data-album-index="'+t+'" class="pgalbumlink">'+a+'<span class="pgalbumtitle">'+e+'</span><span class="pgplus">+</span></a></li>'):u("#pgalbums").append('<li class="pgalbumthumb"><a href="'+t+'" class="pgalbumlink">'+a+'<span class="pgalbumtitle">'+e+'</span><span class="pgplus">+</span></a></li>'))},loadSingleAlbum:function(){var e;switch(n.type){case"google":e="https://picasaweb.google.com/data/feed/base/user/"+n.userId+"/albumid/"+n.albumId+"?alt=json&hl=en_US",n.loadGallery(e);break;case"flickr":e="http://api.flickr.com/services/rest/?&method=flickr.photosets.getPhotos&api_key="+n.apiKey+"&photoset_id="+n.albumId+"=&format=json&jsoncallback=?",n.loadGallery(e);break;case"facebook":e="https://graph.facebook.com/"+n.albumId+"/photos?limit="+n.limit+"&access_token="+n.accessToken,n.loadGallery(e);break;case"instagram":e="https://api.instagram.com/v1/users/"+n.userId+"/media/recent/?access_token="+n.accessToken+"&count="+n.limit,n.loadGallery(e);break;case"local":n.parseData(n.imageData)}r.addClass("loaded"),u("#pgthumbhome").hide()},loadGallery:function(e,a){n.imgArray=[],n.titleArray=[],u("#pgzoom").empty(),u.ajax({url:e,cache:!1,dataType:"jsonp",success:function(e){n.parseData(e,a)},error:function(e,a,t){console.log("Error: \njqXHR:"+e+"\ntextStatus: "+a+"\nerrorThrown: "+t)}})},parseData:function(e,a){var o,l,i,r,s,c="",m=0;switch(u(".crumbtitle").remove(),u("#pgthumbs").empty(),void 0===a&&(a="&nbsp;"),u("#pgthumbcrumbs").append('<li class="crumbtitle">'+a+"</li>"),n.type){case"google":objPath=e.feed.entry;break;case"flickr":objPath=e.photoset.photo;break;case"facebook":case"instagram":objPath=e.data;break;case"local":objPath=e.images}n.imgTotal=objPath.length,n.limit<n.imgTotal&&(n.imgTotal=n.limit),0===n.imgTotal&&alert("Please check your photo permissions,\nor make sure there are photos in this gallery."),s=1100<n.winWidth?(r=1024,"_b"):620<n.winWidth?(r=768,"_b"):(r=540,"_z"),u.each(objPath,function(e,a){if(e<n.limit){switch(n.type){case"google":o=a.title.$t;var t=(l=a.media$group.media$content[0].url).lastIndexOf("/"),t=l.substring(t);l=l.replace(t,"/s"+r+t),i=(i=a.media$group.media$thumbnail[1].url).replace("s144","s160-c");break;case"flickr":o=a.title,l="http://farm"+a.farm+".staticflickr.com/"+a.server+"/"+a.id+"_"+a.secret+s+".jpg",i="http://farm"+a.farm+".staticflickr.com/"+a.server+"/"+a.id+"_"+a.secret+"_q.jpg";break;case"facebook":o=a.name,l=a.images[1].source,i=n.imagePath+"/square.png",c=' style="background: url('+a.images[3].source+') no-repeat 50% 50%; background-size: cover;"';break;case"instagram":null!==a.caption&&(o=a.caption.text),l=a.images.standard_resolution.url,i=a.images.low_resolution.url;break;case"local":null!==a.caption&&(o=a.caption),l=a.src,i=a.th}o=o||"",n.imgArray[e]=l,n.titleArray[e]=o,u("#pgthumbs").append('<li class="pgthumb"><a href="'+l+'"><img src="'+i+'" id="pgthumbimg'+e+'" class="pgthumbimg" alt="'+o+'" title="'+o+'"'+c+"></a></li>"),u("#pgthumbimg"+e).load(function(){++m==n.imgTotal&&(u("#pgalbums").slideFade(700,function(){u(".pgalbumthumb .pgloading").remove()}),u("#pgthumbview").slideFade(700))})}})},zoomIdx:null,zoomImagesLoaded:[],zoomScrollDir:null,zoomScrollLeft:0,loadZoom:function(a){n.zoomIdx=a,n.winWidth=u(window).width();var e=u("#pgzoomview"),t=(u("#pgzoomscroll"),u("#pgprevious")),o=u("#pgnext"),l=(u("#pgzoom"),""),i=n.imgArray.length,t=(e.addClass("fixed"),0===a&&t.hide(),a==i-1&&o.hide(),n.imgArray.length*n.winWidth),r=(u("#pgzoom").width(t),parseInt(a*n.winWidth));e.fadeIn(function(){u(window).on("resize",n.resizeZoom),u.each(n.imgArray,function(e){l=l+'<li class="pgzoomslide loading" id="pgzoomslide'+e+'" style="width: '+n.winWidth+'px;"><img src="'+n.imagePath+'/square.gif" class="pgzoomspacer"><span class="pgzoomcaption">'+n.titleArray[e]+"</span></li>",e+1==n.imgArray.length&&(u("#pgzoom").html(l),n.zoomKeyPress(),u("#pgzoomscroll").scrollLeft(r),n.zoomScrollLeft=r,n.loadZoomImg(a),n.zoomScroll(),0<=a-1&&n.loadZoomImg(a-1),a+1<n.imgArray.length)&&n.loadZoomImg(a+1)})})},loadZoomImg:function(e){0===u("#pgzoomimg"+e).length&&(u("#pgzoomslide"+e+" .pgzoomspacer").after('<img src="'+n.imgArray[e]+'" data-src="'+n.imgArray[e]+'" title="'+n.titleArray[e]+'" alt="'+n.titleArray[e]+'" id="pgzoomimg'+e+'" class="pgzoomimg">'),u("#pgzoomimg"+e).load(function(){u(this).addClass("active")}))},zoomScroll:function(){var t=u("#pgprevious"),o=u("#pgnext"),l=!0;u("#pgzoomscroll").on("scroll",function(){currentScrollLeft=u(this).scrollLeft(),!0===l&&(l=!1,setTimeout(function(){var e,a;0===currentScrollLeft?t.fadeOut():t.fadeIn(),currentScrollLeft>=(n.imgTotal-1)*n.winWidth?o.fadeOut():o.fadeIn(),(20<currentScrollLeft%n.zoomScrollLeft||0<currentScrollLeft&&0===n.zoomScrollLeft)&&(n.zoomScrollLeft=currentScrollLeft,a=n.zoomScrollLeft/n.winWidth,e=Math.ceil(a),a=Math.floor(a),n.zoomImagesLoaded[e]||n.loadZoomImg(e),n.zoomImagesLoaded[a]||n.loadZoomImg(a)),l=!0},200))})},zoomKeyPress:function(){u(document).on("keyup","body",function(e){27==e.which?n.unloadZoom():37==e.which?n.prevNext("previous"):39==e.which&&n.prevNext("next")})},resizeZoom:function(){n.winWidth=u(window).width();var e=n.imgArray.length*n.winWidth,e=(u("#pgzoom").width(e),u(".pgzoomslide").width(n.winWidth),parseInt(n.zoomIdx*n.winWidth));u("#pgzoomscroll").scrollLeft(e)},unloadZoom:function(){u(document).off("keyup","body"),u(window).off("resize",n.resizeZoom),u("#pgzoomscroll").off("scroll"),u("#pgzoomview").fadeOut(function(){u("#pgzoom").empty(),u("#pgzoomview").off("keyup"),u("#pgzoomview").removeClass("fixed")})},prevNext:function(e){var a=u("#pgzoomscroll").scrollLeft()/n.winWidth,e=(n.zoomIdx="previous"==e?Math.round(a)-1:Math.round(a)+1,n.zoomIdx*n.winWidth);u("#pgzoomscroll").stop().animate({scrollLeft:e})}};u.extend(n,e),n.init()}}(jQuery);